<div class="card bg-dark text-light border-secondary mb-4">
  <div class="card-body">
    <h5 class="card-title mb-3">Analysis Progress</h5>
    
    <div class="progress-steps">
      <div class="step <%= @analysis.status == 'completed' ? 'completed' : (@analysis.status == 'processing' ? 'active' : '') %>">
        <div class="step-icon">
          <i class="fas fa-database"></i>
        </div>
        <div class="step-label">Fetching Steam Data</div>
      </div>
      
      <div class="step <%= @analysis.status == 'completed' ? 'completed' : (@analysis.status == 'processing' && @analysis.text_report.present? ? 'active' : '') %>">
        <div class="step-icon">
          <i class="fas fa-file-alt"></i>
        </div>
        <div class="step-label">Analyzing Text</div>
      </div>
      
      <div class="step <%= @analysis.status == 'completed' ? 'completed' : (@analysis.status == 'processing' && @analysis.visual_report.present? ? 'active' : '') %>">
        <div class="step-icon">
          <i class="fas fa-image"></i>
        </div>
        <div class="step-label">Analyzing Visuals</div>
      </div>
      
      <div class="step <%= @analysis.status == 'completed' ? 'completed' : (@analysis.status == 'processing' && @analysis.ai_suggestions.present? ? 'active' : '') %>">
        <div class="step-icon">
          <i class="fas fa-robot"></i>
        </div>
        <div class="step-label">Generating AI Suggestions</div>
      </div>
      
      <div class="step <%= @analysis.status == 'completed' ? 'completed' : (@analysis.status == 'processing' && @analysis.image_suggestions.present? ? 'active' : '') %>">
        <div class="step-icon">
          <i class="fas fa-camera"></i>
        </div>
        <div class="step-label">Analyzing Capsule Image</div>
      </div>
    </div>
  </div>
</div>

<style>
.progress-steps {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin: 20px 0;
  position: relative;
}

.progress-steps::before {
  content: '';
  position: absolute;
  top: 50%;
  left: 0;
  right: 0;
  height: 2px;
  background: #444;
  z-index: 1;
}

.step {
  position: relative;
  z-index: 2;
  text-align: center;
  width: 100px;
}

.step-icon {
  width: 40px;
  height: 40px;
  border-radius: 50%;
  background: #333;
  border: 2px solid #444;
  display: flex;
  align-items: center;
  justify-content: center;
  margin: 0 auto 8px;
  color: #666;
}

.step-label {
  font-size: 0.8rem;
  color: #666;
}

.step.active .step-icon {
  background: #007bff;
  border-color: #0056b3;
  color: white;
}

.step.completed .step-icon {
  background: #28a745;
  border-color: #1e7e34;
  color: white;
}

.step.active .step-label,
.step.completed .step-label {
  color: #fff;
}
</style> 