<div class="card bg-dark text-light border-secondary mb-4">
  <div class="card-body">
    <h3 class="card-title">Capsule Image Analysis</h3>

    <div class="content-section">
      <h5 class="text-primary">Current Capsule Image</h5>
      
      <div class="mb-4">
        <% if @game.capsule_image_url.present? %>
          <img src="<%= @game.capsule_image_url %>" alt="Game capsule image" class="img-fluid rounded mb-3" style="max-width: 460px;">
          <p class="mb-0 text-success">
            <i class="fas fa-check-circle"></i> Capsule image is present
          </p>
        <% else %>
          <p class="mb-0 text-warning">
            <i class="fas fa-exclamation-circle"></i> No capsule image uploaded
          </p>
        <% end %>
      </div>
    </div>

    <%# AI suggestions for improving capsule image %>
    <div class="mt-4">
      <h5 class="border-bottom border-secondary pb-2">AI Suggestions for Capsule Image:</h5>
      <div class="card bg-darker text-light border-secondary">
        <div class="card-body">
          <% if @analysis.image_suggestions.present? %>
            <ul class="mb-0 list-unstyled">
              <% @analysis.image_suggestions.split("\n").each do |suggestion| %>
                <% if suggestion.strip.present? %>
                  <li class="mb-2">
                    <i class="fas fa-chevron-right text-primary me-2"></i>
                    <%= suggestion.strip %>
                  </li>
                <% end %>
              <% end %>
            </ul>
          <% elsif @game.capsule_image_url.present? %>
            <p class="mb-0 text-warning">
              <i class="fas fa-exclamation-circle"></i> No AI suggestions available
            </p>
          <% else %>
            <p class="mb-0 text-warning">
              <i class="fas fa-exclamation-circle"></i> Consider adding a capsule image to improve your store page's visual appeal.
            </p>
          <% end %>
        </div>
      </div>
      <small class="text-muted mt-2 d-block">
        <i class="fas fa-robot"></i> These suggestions are generated by AI based on your current capsule image.
      </small>
    </div>

    <%# Image validation report %>
    <% if @analysis.image_validation.present? %>
      <div class="mt-4">
        <h5 class="border-bottom border-secondary pb-2">Image Validation Report:</h5>
        <div class="card bg-darker text-light border-secondary">
          <div class="card-body">
            <ul class="mb-0 list-unstyled">
              <% @analysis.image_validation.split("\n").each do |validation| %>
                <% if validation.strip.present? %>
                  <li class="mb-2">
                    <i class="fas fa-chevron-right text-primary me-2"></i>
                    <%= validation.strip %>
                  </li>
                <% end %>
              <% end %>
            </ul>
          </div>
        </div>
        <small class="text-muted mt-2 d-block">
          <i class="fas fa-robot"></i> This validation is based on Steam's requirements for capsule images.
        </small>
      </div>
    <% end %>
  </div>
</div> 