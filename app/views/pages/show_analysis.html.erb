<div class="container-fluid py-4">
  <div class="d-flex justify-content-between align-items-center mb-4">
    <h1 class="text-light mb-0"><%= @game.name %></h1>
    <button type="button" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#requestModal">
      <i class="fas fa-redo"></i> Run New Analysis
    </button>
  </div>

  <div class="container py-5">
    <div class="row justify-content-center">
      <div class="col-md-10">
        <div class="d-flex justify-content-between align-items-center mb-4">
          <h1 class="mb-0"><%= @game.name %> Analysis</h1>
          
          <div class="d-flex gap-2">
            <button class="btn btn-outline-light" data-bs-toggle="tooltip" title="Copy Link" onclick="copyShareLink()">
              <i class="fas fa-link"></i>
            </button>
            
            <a href="https://twitter.com/intent/tweet?text=<%= URI.encode_www_form_component("Check out this Steam page analysis for #{@game.name}") %>&url=<%= URI.encode_www_form_component(show_analysis_url(@game.slug)) %>" 
               class="btn btn-outline-light" 
               target="_blank"
               data-bs-toggle="tooltip" 
               title="Share on Twitter">
              <i class="fab fa-twitter"></i>
            </a>
          </div>
        </div>

        <div class="card bg-dark text-light border-secondary mb-4">
          <div class="card-body">
            <div class="d-flex justify-content-between align-items-center">
              <h5 class="card-title mb-0">Analysis Details</h5>
              <span class="text-muted">Analyzed on <%= @analysis.created_at.strftime("%B %d, %Y") %></span>
            </div>
          </div>
        </div>

        <% if @analysis.processing? %>
          <%= render "analysis_progress" %>
        <% end %>

        <%= render "results", analysis: @analysis %>

        <% if @game.analyses.count > 1 %>
          <%= render "analysis_history" %>
        <% end %>
      </div>
    </div>
  </div>
</div>