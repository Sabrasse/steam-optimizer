<!-- app/views/pages/_visuals_section.html.erb -->
<div class="card bg-dark text-light border-secondary mb-4">
  <div class="card-body">
    <h3 class="card-title">
      Visuals Analysis
      <span class="badge <%= visual_report['score'] == 'A' ? 'bg-success' : 'bg-warning' %>">
        Score: <%= visual_report['score'] %>
      </span>
    </h3>

    <div class="content-section">
      <h5 class="text-primary">Current Visuals</h5>
      
      <div class="mb-4">
        <h6>Screenshots:</h6>
        <p class="mb-2">
          <% if @game.screenshots.present? %>
            <%= @game.screenshots.size %> screenshots uploaded
          <% else %>
            No screenshots uploaded
          <% end %>
        </p>
        <% if visual_report['issues'].present? && visual_report['issues'].any? { |i| i.to_s.include?('screenshots') } %>
          <div class="text-warning">
            <i class="fas fa-exclamation-circle"></i>
            <small>
              <% visual_report['issues'].select { |i| i.to_s.include?('screenshots') }.each do |issue| %>
                <%= issue.to_s %><br>
              <% end %>
            </small>
          </div>
        <% end %>
      </div>

      <div>
        <h6>Trailers:</h6>
        <p class="mb-0">
          <% if @game.movies.present? %>
            <%= @game.movies.size %> trailers uploaded
          <% else %>
            No trailers uploaded
          <% end %>
        </p>
        <% if visual_report['issues'].present? && visual_report['issues'].any? { |i| i.to_s.include?('trailers') } %>
          <div class="text-warning">
            <i class="fas fa-exclamation-circle"></i>
            <small>
              <% visual_report['issues'].select { |i| i.to_s.include?('trailers') }.each do |issue| %>
                <%= issue.to_s %><br>
              <% end %>
            </small>
          </div>
        <% end %>
      </div>
    </div>

    <%# AI suggestions for improving visuals %>
    <div class="mt-4">
      <h5 class="border-bottom border-secondary pb-2">AI Suggestions for Visual Improvements:</h5>
      <div class="card bg-darker text-light border-secondary">
        <div class="card-body">
          <% if visual_report['issues'].present? && visual_report['issues'].any? %>
            <ul class="mb-0">
              <% visual_report['issues'].each do |issue| %>
                <li><%= issue.to_s %></li>
              <% end %>
            </ul>
          <% else %>
            <p class="mb-0 text-success">
              <i class="fas fa-check-circle"></i> Your visuals look good! No major improvements needed.
            </p>
          <% end %>
        </div>
      </div>
      <small class="text-muted mt-2 d-block">
        <i class="fas fa-robot"></i> These suggestions are generated by AI based on your current visuals.
      </small>
    </div>
  </div>
</div> 