<%# 
  Base Button Component
  
  Usage:
  <%= render "components/base_button/base_button", 
      text: "Click me",
      type: "button", # or "submit"
      variant: "primary", # or "secondary"
      size: "md", # sm, md, lg
      icon: "arrow-right", # optional
      icon_position: "right", # left or right
      loading: false,
      disabled: false,
      class: "additional-classes",
      data: { action: "click->base-button#click" }
  %>

  Parameters:
  - text: The button text (required)
  - type: Button type (default: "button")
  - variant: Button variant (default: "primary")
  - size: Button size (default: "md")
  - icon: Icon name (optional)
  - icon_position: Icon position (default: "right")
  - loading: Loading state (default: false)
  - disabled: Disabled state (default: false)
  - class: Additional CSS classes
  - data: Additional data attributes
%>

<button
  type="<%= local_assigns[:type] || 'button' %>"
  class="base-button base-button--<%= local_assigns[:variant] || 'primary' %> base-button--<%= local_assigns[:size] || 'md' %> <%= local_assigns[:class] %>"
  data-controller="base-button"
  data-base-button-loading-value="<%= local_assigns[:loading] || false %>"
  <%= "disabled" if local_assigns[:disabled] %>
  <% local_assigns[:data]&.each do |key, value| %>
    data-<%= key %>="<%= value %>"
  <% end %>
>
  <% if local_assigns[:icon] && local_assigns[:icon_position] == 'left' %>
    <i class="base-button__icon base-button__icon--left">
      <%= render "components/icons/#{icon}" %>
    </i>
  <% end %>
  
  <span class="base-button__text"><%= text %></span>
  
  <% if local_assigns[:icon] && local_assigns[:icon_position] != 'left' %>
    <i class="base-button__icon base-button__icon--right">
      <%= render "components/icons/#{icon}" %>
    </i>
  <% end %>
</button> 